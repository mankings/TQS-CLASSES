package tqs.airquality.adapters;

import static org.mockito.ArgumentMatchers.any;
import static org.mockito.ArgumentMatchers.anyString;
import static org.assertj.core.api.Assertions.assertThat;


import java.util.List;

import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.Mockito;
import org.mockito.junit.jupiter.MockitoExtension;

import tqs.airquality.http.IHttpClient;
import tqs.airquality.model.AirStats;


/*
 * mockito again: refer to other adapter class
 */
@ExtendWith(MockitoExtension.class)
class OpenWeatherAdapterTest {
    @Mock
    private IHttpClient httpClient;

    @InjectMocks
    private OpenWeatherAdapter adapter;

    private String weekResponse = "{\"coord\":{\"lon\":-8,\"lat\":40},\"list\":[{\"main\":{\"aqi\":3},\"components\":{\"co\":196.93,\"no\":0.06,\"no2\":0.75,\"o3\":101.57,\"so2\":0.43,\"pm2_5\":2.01,\"pm10\":2.84,\"nh3\":2.28},\"dt\":1680541200},{\"main\":{\"aqi\":3},\"components\":{\"co\":200.27,\"no\":0.04,\"no2\":1.48,\"o3\":107.29,\"so2\":1.1,\"pm2_5\":3.71,\"pm10\":4.97,\"nh3\":2.79},\"dt\":1680544800},{\"main\":{\"aqi\":3},\"components\":{\"co\":198.6,\"no\":0.01,\"no2\":2.21,\"o3\":100.14,\"so2\":1.1,\"pm2_5\":4.98,\"pm10\":6.84,\"nh3\":2.57},\"dt\":1680548400},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":2.4,\"o3\":87.98,\"so2\":0.76,\"pm2_5\":5.45,\"pm10\":7.62,\"nh3\":2.09},\"dt\":1680552000},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":2.34,\"o3\":81.54,\"so2\":0.51,\"pm2_5\":5.44,\"pm10\":7.61,\"nh3\":1.54},\"dt\":1680555600},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":2.21,\"o3\":78.68,\"so2\":0.37,\"pm2_5\":5.31,\"pm10\":7.29,\"nh3\":1.2},\"dt\":1680559200},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.99,\"o3\":77.96,\"so2\":0.29,\"pm2_5\":5.08,\"pm10\":6.88,\"nh3\":1.3},\"dt\":1680562800},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.65,\"o3\":77.25,\"so2\":0.24,\"pm2_5\":4.92,\"pm10\":6.7,\"nh3\":1.55},\"dt\":1680566400},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0,\"no2\":1.31,\"o3\":75.1,\"so2\":0.19,\"pm2_5\":4.66,\"pm10\":6.45,\"nh3\":1.69},\"dt\":1680570000},{\"main\":{\"aqi\":2},\"components\":{\"co\":195.27,\"no\":0,\"no2\":1.15,\"o3\":70.1,\"so2\":0.14,\"pm2_5\":4.03,\"pm10\":5.58,\"nh3\":1.93},\"dt\":1680573600},{\"main\":{\"aqi\":2},\"components\":{\"co\":195.27,\"no\":0,\"no2\":1.16,\"o3\":67.95,\"so2\":0.13,\"pm2_5\":3.1,\"pm10\":4.3,\"nh3\":2.03},\"dt\":1680577200},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0,\"no2\":1.14,\"o3\":67.95,\"so2\":0.14,\"pm2_5\":2.49,\"pm10\":3.45,\"nh3\":2.09},\"dt\":1680580800},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0,\"no2\":1.1,\"o3\":69.38,\"so2\":0.16,\"pm2_5\":2.17,\"pm10\":2.97,\"nh3\":2.19},\"dt\":1680584400},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.36,\"o3\":71.53,\"so2\":0.16,\"pm2_5\":1.86,\"pm10\":2.53,\"nh3\":2.57},\"dt\":1680588000},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.99,\"o3\":70.81,\"so2\":0.14,\"pm2_5\":1.55,\"pm10\":2.14,\"nh3\":3.48},\"dt\":1680591600},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0.06,\"no2\":2.49,\"o3\":66.52,\"so2\":0.14,\"pm2_5\":1.33,\"pm10\":1.92,\"nh3\":4.56},\"dt\":1680595200},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0.21,\"no2\":2.19,\"o3\":65.8,\"so2\":0.13,\"pm2_5\":1.16,\"pm10\":1.71,\"nh3\":4.94},\"dt\":1680598800},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0.28,\"no2\":1.21,\"o3\":77.96,\"so2\":0.12,\"pm2_5\":1.15,\"pm10\":1.55,\"nh3\":4.05},\"dt\":1680602400},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0.19,\"no2\":0.83,\"o3\":84.4,\"so2\":0.11,\"pm2_5\":1.47,\"pm10\":1.83,\"nh3\":3.36},\"dt\":1680606000},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0.14,\"no2\":0.59,\"o3\":88.69,\"so2\":0.11,\"pm2_5\":1.84,\"pm10\":2.17,\"nh3\":3.1},\"dt\":1680609600},{\"main\":{\"aqi\":2},\"components\":{\"co\":195.27,\"no\":0.07,\"no2\":0.34,\"o3\":98.71,\"so2\":0.09,\"pm2_5\":1.63,\"pm10\":1.93,\"nh3\":2.6},\"dt\":1680613200},{\"main\":{\"aqi\":3},\"components\":{\"co\":193.6,\"no\":0.06,\"no2\":0.29,\"o3\":104.43,\"so2\":0.08,\"pm2_5\":1.45,\"pm10\":1.71,\"nh3\":2.15},\"dt\":1680616800},{\"main\":{\"aqi\":3},\"components\":{\"co\":191.93,\"no\":0.06,\"no2\":0.3,\"o3\":105.86,\"so2\":0.07,\"pm2_5\":1.42,\"pm10\":1.65,\"nh3\":2},\"dt\":1680620400},{\"main\":{\"aqi\":3},\"components\":{\"co\":193.6,\"no\":0.08,\"no2\":0.49,\"o3\":101.57,\"so2\":0.07,\"pm2_5\":1.68,\"pm10\":1.95,\"nh3\":2.06},\"dt\":1680624000},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0.1,\"no2\":0.76,\"o3\":97.28,\"so2\":0.08,\"pm2_5\":1.92,\"pm10\":2.24,\"nh3\":2.06},\"dt\":1680627600},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0.07,\"no2\":0.98,\"o3\":94.41,\"so2\":0.08,\"pm2_5\":1.84,\"pm10\":2.16,\"nh3\":1.93},\"dt\":1680631200},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0.01,\"no2\":1.1,\"o3\":91.55,\"so2\":0.09,\"pm2_5\":1.55,\"pm10\":1.83,\"nh3\":1.76},\"dt\":1680634800},{\"main\":{\"aqi\":2},\"components\":{\"co\":195.27,\"no\":0,\"no2\":1.1,\"o3\":92.98,\"so2\":0.09,\"pm2_5\":1.43,\"pm10\":1.68,\"nh3\":1.82},\"dt\":1680638400},{\"main\":{\"aqi\":2},\"components\":{\"co\":200.27,\"no\":0,\"no2\":1.13,\"o3\":95.84,\"so2\":0.11,\"pm2_5\":1.52,\"pm10\":1.76,\"nh3\":2.15},\"dt\":1680642000},{\"main\":{\"aqi\":3},\"components\":{\"co\":203.61,\"no\":0,\"no2\":1.05,\"o3\":100.14,\"so2\":0.12,\"pm2_5\":1.52,\"pm10\":1.75,\"nh3\":2.41},\"dt\":1680645600},{\"main\":{\"aqi\":2},\"components\":{\"co\":205.28,\"no\":0,\"no2\":0.92,\"o3\":98.71,\"so2\":0.12,\"pm2_5\":1.38,\"pm10\":1.59,\"nh3\":2.6},\"dt\":1680649200},{\"main\":{\"aqi\":2},\"components\":{\"co\":205.28,\"no\":0,\"no2\":0.85,\"o3\":94.41,\"so2\":0.12,\"pm2_5\":1.32,\"pm10\":1.52,\"nh3\":2.91},\"dt\":1680652800},{\"main\":{\"aqi\":2},\"components\":{\"co\":206.95,\"no\":0,\"no2\":0.81,\"o3\":87.98,\"so2\":0.11,\"pm2_5\":1.37,\"pm10\":1.6,\"nh3\":3.2},\"dt\":1680656400},{\"main\":{\"aqi\":2},\"components\":{\"co\":206.95,\"no\":0,\"no2\":0.8,\"o3\":82.97,\"so2\":0.11,\"pm2_5\":1.53,\"pm10\":1.79,\"nh3\":3.45},\"dt\":1680660000},{\"main\":{\"aqi\":2},\"components\":{\"co\":208.62,\"no\":0,\"no2\":0.76,\"o3\":80.11,\"so2\":0.11,\"pm2_5\":1.72,\"pm10\":1.99,\"nh3\":3.55},\"dt\":1680663600},{\"main\":{\"aqi\":2},\"components\":{\"co\":206.95,\"no\":0,\"no2\":0.72,\"o3\":77.96,\"so2\":0.12,\"pm2_5\":1.86,\"pm10\":2.15,\"nh3\":3.55},\"dt\":1680667200},{\"main\":{\"aqi\":2},\"components\":{\"co\":205.28,\"no\":0,\"no2\":0.74,\"o3\":77.96,\"so2\":0.11,\"pm2_5\":1.91,\"pm10\":2.2,\"nh3\":3.48},\"dt\":1680670800},{\"main\":{\"aqi\":2},\"components\":{\"co\":205.28,\"no\":0,\"no2\":0.94,\"o3\":79.39,\"so2\":0.11,\"pm2_5\":1.89,\"pm10\":2.19,\"nh3\":3.48},\"dt\":1680674400},{\"main\":{\"aqi\":2},\"components\":{\"co\":205.28,\"no\":0.01,\"no2\":1.3,\"o3\":80.82,\"so2\":0.11,\"pm2_5\":1.86,\"pm10\":2.18,\"nh3\":3.55},\"dt\":1680678000},{\"main\":{\"aqi\":2},\"components\":{\"co\":203.61,\"no\":0.09,\"no2\":1.35,\"o3\":80.11,\"so2\":0.13,\"pm2_5\":1.89,\"pm10\":2.32,\"nh3\":3.61},\"dt\":1680681600},{\"main\":{\"aqi\":2},\"components\":{\"co\":201.94,\"no\":0.17,\"no2\":1.03,\"o3\":80.82,\"so2\":0.16,\"pm2_5\":1.99,\"pm10\":2.58,\"nh3\":3.58},\"dt\":1680685200},{\"main\":{\"aqi\":2},\"components\":{\"co\":200.27,\"no\":0.14,\"no2\":0.65,\"o3\":84.4,\"so2\":0.2,\"pm2_5\":2.15,\"pm10\":2.99,\"nh3\":3.26},\"dt\":1680688800},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0.12,\"no2\":0.53,\"o3\":87.26,\"so2\":0.22,\"pm2_5\":2.33,\"pm10\":3.28,\"nh3\":3.07},\"dt\":1680692400},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0.1,\"no2\":0.44,\"o3\":90.84,\"so2\":0.23,\"pm2_5\":2.51,\"pm10\":3.47,\"nh3\":3.04},\"dt\":1680696000},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0.07,\"no2\":0.35,\"o3\":97.28,\"so2\":0.23,\"pm2_5\":2.4,\"pm10\":3.3,\"nh3\":2.47},\"dt\":1680699600},{\"main\":{\"aqi\":3},\"components\":{\"co\":196.93,\"no\":0.07,\"no2\":0.33,\"o3\":100.14,\"so2\":0.21,\"pm2_5\":2.35,\"pm10\":3.12,\"nh3\":2.28},\"dt\":1680703200},{\"main\":{\"aqi\":3},\"components\":{\"co\":195.27,\"no\":0.06,\"no2\":0.34,\"o3\":100.14,\"so2\":0.19,\"pm2_5\":2.45,\"pm10\":3.09,\"nh3\":2.41},\"dt\":1680706800},{\"main\":{\"aqi\":2},\"components\":{\"co\":195.27,\"no\":0.08,\"no2\":0.49,\"o3\":97.28,\"so2\":0.16,\"pm2_5\":2.57,\"pm10\":3.11,\"nh3\":2.41},\"dt\":1680710400},{\"main\":{\"aqi\":2},\"components\":{\"co\":195.27,\"no\":0.09,\"no2\":0.7,\"o3\":95.84,\"so2\":0.13,\"pm2_5\":2.51,\"pm10\":2.98,\"nh3\":2.19},\"dt\":1680714000},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0.06,\"no2\":0.87,\"o3\":95.84,\"so2\":0.12,\"pm2_5\":2.29,\"pm10\":2.74,\"nh3\":2.09},\"dt\":1680717600},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0.01,\"no2\":1.24,\"o3\":89.41,\"so2\":0.12,\"pm2_5\":2.16,\"pm10\":2.7,\"nh3\":2.06},\"dt\":1680721200},{\"main\":{\"aqi\":2},\"components\":{\"co\":195.27,\"no\":0,\"no2\":1.65,\"o3\":80.11,\"so2\":0.13,\"pm2_5\":2.11,\"pm10\":2.77,\"nh3\":1.98},\"dt\":1680724800},{\"main\":{\"aqi\":2},\"components\":{\"co\":195.27,\"no\":0,\"no2\":1.95,\"o3\":73.67,\"so2\":0.13,\"pm2_5\":2,\"pm10\":2.74,\"nh3\":1.9},\"dt\":1680728400},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0,\"no2\":2.38,\"o3\":62.23,\"so2\":0.11,\"pm2_5\":1.95,\"pm10\":2.81,\"nh3\":1.65},\"dt\":1680732000},{\"main\":{\"aqi\":1},\"components\":{\"co\":191.93,\"no\":0,\"no2\":2.57,\"o3\":52.21,\"so2\":0.08,\"pm2_5\":1.89,\"pm10\":2.82,\"nh3\":1.46},\"dt\":1680735600},{\"main\":{\"aqi\":1},\"components\":{\"co\":191.93,\"no\":0,\"no2\":2.23,\"o3\":50.07,\"so2\":0.07,\"pm2_5\":1.75,\"pm10\":2.69,\"nh3\":1.46},\"dt\":1680739200},{\"main\":{\"aqi\":1},\"components\":{\"co\":191.93,\"no\":0,\"no2\":1.78,\"o3\":49.35,\"so2\":0.06,\"pm2_5\":1.63,\"pm10\":2.62,\"nh3\":1.5},\"dt\":1680742800},{\"main\":{\"aqi\":1},\"components\":{\"co\":191.93,\"no\":0,\"no2\":1.5,\"o3\":48.64,\"so2\":0.06,\"pm2_5\":1.55,\"pm10\":2.59,\"nh3\":1.57},\"dt\":1680746400},{\"main\":{\"aqi\":1},\"components\":{\"co\":191.93,\"no\":0,\"no2\":1.37,\"o3\":48.64,\"so2\":0.06,\"pm2_5\":1.5,\"pm10\":2.5,\"nh3\":1.69},\"dt\":1680750000},{\"main\":{\"aqi\":1},\"components\":{\"co\":191.93,\"no\":0,\"no2\":1.35,\"o3\":49.35,\"so2\":0.06,\"pm2_5\":1.46,\"pm10\":2.46,\"nh3\":1.84},\"dt\":1680753600},{\"main\":{\"aqi\":1},\"components\":{\"co\":191.93,\"no\":0,\"no2\":1.56,\"o3\":49.35,\"so2\":0.06,\"pm2_5\":1.44,\"pm10\":2.47,\"nh3\":2.01},\"dt\":1680757200},{\"main\":{\"aqi\":1},\"components\":{\"co\":191.93,\"no\":0,\"no2\":2.61,\"o3\":50.07,\"so2\":0.07,\"pm2_5\":1.45,\"pm10\":2.53,\"nh3\":2.28},\"dt\":1680760800},{\"main\":{\"aqi\":1},\"components\":{\"co\":193.6,\"no\":0.05,\"no2\":4.8,\"o3\":50.78,\"so2\":0.09,\"pm2_5\":1.47,\"pm10\":2.49,\"nh3\":2.5},\"dt\":1680764400},{\"main\":{\"aqi\":1},\"components\":{\"co\":190.26,\"no\":0.78,\"no2\":5.74,\"o3\":45.78,\"so2\":0.09,\"pm2_5\":1.47,\"pm10\":2.49,\"nh3\":2.15},\"dt\":1680768000},{\"main\":{\"aqi\":1},\"components\":{\"co\":186.92,\"no\":1.54,\"no2\":4.67,\"o3\":43.63,\"so2\":0.09,\"pm2_5\":1.53,\"pm10\":2.57,\"nh3\":1.66},\"dt\":1680771600},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0.19,\"no2\":1.02,\"o3\":94.41,\"so2\":0.09,\"pm2_5\":1.17,\"pm10\":1.48,\"nh3\":2.31},\"dt\":1680775200},{\"main\":{\"aqi\":3},\"components\":{\"co\":191.93,\"no\":0.13,\"no2\":0.65,\"o3\":100.14,\"so2\":0.08,\"pm2_5\":1.12,\"pm10\":1.37,\"nh3\":2.22},\"dt\":1680778800},{\"main\":{\"aqi\":3},\"components\":{\"co\":190.26,\"no\":0.11,\"no2\":0.54,\"o3\":103,\"so2\":0.08,\"pm2_5\":1.17,\"pm10\":1.4,\"nh3\":2.19},\"dt\":1680782400},{\"main\":{\"aqi\":3},\"components\":{\"co\":188.59,\"no\":0.07,\"no2\":0.38,\"o3\":108.72,\"so2\":0.07,\"pm2_5\":1.08,\"pm10\":1.25,\"nh3\":1.87},\"dt\":1680786000},{\"main\":{\"aqi\":3},\"components\":{\"co\":188.59,\"no\":0.06,\"no2\":0.33,\"o3\":110.15,\"so2\":0.08,\"pm2_5\":1.16,\"pm10\":1.36,\"nh3\":1.71},\"dt\":1680789600},{\"main\":{\"aqi\":3},\"components\":{\"co\":190.26,\"no\":0.06,\"no2\":0.33,\"o3\":111.58,\"so2\":0.09,\"pm2_5\":1.34,\"pm10\":1.61,\"nh3\":1.77},\"dt\":1680793200},{\"main\":{\"aqi\":3},\"components\":{\"co\":190.26,\"no\":0.08,\"no2\":0.5,\"o3\":110.15,\"so2\":0.09,\"pm2_5\":1.56,\"pm10\":1.94,\"nh3\":1.85},\"dt\":1680796800},{\"main\":{\"aqi\":3},\"components\":{\"co\":190.26,\"no\":0.09,\"no2\":0.74,\"o3\":108.72,\"so2\":0.08,\"pm2_5\":1.6,\"pm10\":2.08,\"nh3\":1.88},\"dt\":1680800400},{\"main\":{\"aqi\":3},\"components\":{\"co\":190.26,\"no\":0.06,\"no2\":0.93,\"o3\":105.86,\"so2\":0.07,\"pm2_5\":1.72,\"pm10\":2.35,\"nh3\":2.41},\"dt\":1680804000},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0.02,\"no2\":1.67,\"o3\":94.41,\"so2\":0.15,\"pm2_5\":2.98,\"pm10\":4.06,\"nh3\":2.91},\"dt\":1680807600},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":2.46,\"o3\":81.54,\"so2\":0.3,\"pm2_5\":5.57,\"pm10\":7.26,\"nh3\":2.85},\"dt\":1680811200},{\"main\":{\"aqi\":2},\"components\":{\"co\":203.61,\"no\":0,\"no2\":2.91,\"o3\":75.82,\"so2\":0.45,\"pm2_5\":8.73,\"pm10\":10.98,\"nh3\":2.47},\"dt\":1680814800},{\"main\":{\"aqi\":2},\"components\":{\"co\":205.28,\"no\":0,\"no2\":3.21,\"o3\":67.23,\"so2\":0.38,\"pm2_5\":10.35,\"pm10\":12.93,\"nh3\":1.33},\"dt\":1680818400},{\"main\":{\"aqi\":2},\"components\":{\"co\":201.94,\"no\":0,\"no2\":3.13,\"o3\":58.65,\"so2\":0.3,\"pm2_5\":10.1,\"pm10\":12.71,\"nh3\":1.27},\"dt\":1680822000},{\"main\":{\"aqi\":1},\"components\":{\"co\":196.93,\"no\":0,\"no2\":2.59,\"o3\":53.64,\"so2\":0.24,\"pm2_5\":8.56,\"pm10\":10.94,\"nh3\":1.5},\"dt\":1680825600},{\"main\":{\"aqi\":1},\"components\":{\"co\":191.93,\"no\":0,\"no2\":2.12,\"o3\":50.78,\"so2\":0.18,\"pm2_5\":6.68,\"pm10\":8.77,\"nh3\":1.74},\"dt\":1680829200},{\"main\":{\"aqi\":1},\"components\":{\"co\":186.92,\"no\":0,\"no2\":1.8,\"o3\":50.78,\"so2\":0.16,\"pm2_5\":5.1,\"pm10\":6.9,\"nh3\":1.95},\"dt\":1680832800},{\"main\":{\"aqi\":1},\"components\":{\"co\":185.25,\"no\":0,\"no2\":1.59,\"o3\":50.07,\"so2\":0.16,\"pm2_5\":4.08,\"pm10\":5.7,\"nh3\":2.03},\"dt\":1680836400},{\"main\":{\"aqi\":1},\"components\":{\"co\":185.25,\"no\":0,\"no2\":1.46,\"o3\":52.93,\"so2\":0.17,\"pm2_5\":3.56,\"pm10\":5.16,\"nh3\":2.06},\"dt\":1680840000},{\"main\":{\"aqi\":1},\"components\":{\"co\":185.25,\"no\":0,\"no2\":1.54,\"o3\":55.08,\"so2\":0.19,\"pm2_5\":3.41,\"pm10\":5.12,\"nh3\":2.19},\"dt\":1680843600},{\"main\":{\"aqi\":1},\"components\":{\"co\":185.25,\"no\":0,\"no2\":2.51,\"o3\":54.36,\"so2\":0.22,\"pm2_5\":3.44,\"pm10\":5.35,\"nh3\":2.34},\"dt\":1680847200},{\"main\":{\"aqi\":1},\"components\":{\"co\":185.25,\"no\":0.1,\"no2\":4.76,\"o3\":50.78,\"so2\":0.24,\"pm2_5\":3.52,\"pm10\":5.58,\"nh3\":2.57},\"dt\":1680850800},{\"main\":{\"aqi\":1},\"components\":{\"co\":183.58,\"no\":1.06,\"no2\":5.91,\"o3\":43.99,\"so2\":0.21,\"pm2_5\":3.6,\"pm10\":5.81,\"nh3\":2.47},\"dt\":1680854400},{\"main\":{\"aqi\":1},\"components\":{\"co\":180.24,\"no\":1.96,\"no2\":5.57,\"o3\":45.42,\"so2\":0.2,\"pm2_5\":3.78,\"pm10\":6.19,\"nh3\":2.5},\"dt\":1680858000},{\"main\":{\"aqi\":3},\"components\":{\"co\":190.26,\"no\":0.17,\"no2\":1,\"o3\":105.86,\"so2\":0.42,\"pm2_5\":3.44,\"pm10\":4.69,\"nh3\":2},\"dt\":1680861600},{\"main\":{\"aqi\":3},\"components\":{\"co\":190.26,\"no\":0.1,\"no2\":0.6,\"o3\":108.72,\"so2\":0.4,\"pm2_5\":3.46,\"pm10\":4.67,\"nh3\":1.85},\"dt\":1680865200},{\"main\":{\"aqi\":3},\"components\":{\"co\":190.26,\"no\":0.08,\"no2\":0.44,\"o3\":110.15,\"so2\":0.37,\"pm2_5\":3.42,\"pm10\":4.7,\"nh3\":1.69},\"dt\":1680868800},{\"main\":{\"aqi\":3},\"components\":{\"co\":190.26,\"no\":0.06,\"no2\":0.34,\"o3\":110.15,\"so2\":0.31,\"pm2_5\":3.03,\"pm10\":4.24,\"nh3\":1.54},\"dt\":1680872400},{\"main\":{\"aqi\":3},\"components\":{\"co\":190.26,\"no\":0.05,\"no2\":0.31,\"o3\":111.58,\"so2\":0.26,\"pm2_5\":2.83,\"pm10\":3.88,\"nh3\":1.5},\"dt\":1680876000},{\"main\":{\"aqi\":3},\"components\":{\"co\":190.26,\"no\":0.05,\"no2\":0.33,\"o3\":113.01,\"so2\":0.26,\"pm2_5\":3.1,\"pm10\":4.11,\"nh3\":1.55},\"dt\":1680879600},{\"main\":{\"aqi\":3},\"components\":{\"co\":190.26,\"no\":0.08,\"no2\":0.51,\"o3\":114.44,\"so2\":0.42,\"pm2_5\":3.93,\"pm10\":5.04,\"nh3\":1.79},\"dt\":1680883200}]}";

    private String historyResponse = "{\"coord\":{\"lon\":-8,\"lat\":40},\"list\":[{\"main\":{\"aqi\":1},\"components\":{\"co\":186.92,\"no\":0,\"no2\":3.21,\"o3\":58.65,\"so2\":0.33,\"pm2_5\":3.18,\"pm10\":6.21,\"nh3\":2.41},\"dt\":1679958000},{\"main\":{\"aqi\":2},\"components\":{\"co\":188.59,\"no\":0,\"no2\":2.72,\"o3\":66.52,\"so2\":0.32,\"pm2_5\":3.07,\"pm10\":5.9,\"nh3\":3.07},\"dt\":1679961600},{\"main\":{\"aqi\":2},\"components\":{\"co\":191.93,\"no\":0,\"no2\":2.14,\"o3\":72.24,\"so2\":0.29,\"pm2_5\":2.93,\"pm10\":5.62,\"nh3\":3.55},\"dt\":1679965200},{\"main\":{\"aqi\":2},\"components\":{\"co\":191.93,\"no\":0,\"no2\":1.65,\"o3\":78.68,\"so2\":0.26,\"pm2_5\":2.76,\"pm10\":5.24,\"nh3\":3.77},\"dt\":1679968800},{\"main\":{\"aqi\":2},\"components\":{\"co\":191.93,\"no\":0,\"no2\":1.22,\"o3\":81.54,\"so2\":0.23,\"pm2_5\":2.6,\"pm10\":4.77,\"nh3\":3.64},\"dt\":1679972400},{\"main\":{\"aqi\":2},\"components\":{\"co\":186.92,\"no\":0,\"no2\":0.99,\"o3\":77.25,\"so2\":0.18,\"pm2_5\":2.48,\"pm10\":4.42,\"nh3\":3.13},\"dt\":1679976000},{\"main\":{\"aqi\":2},\"components\":{\"co\":185.25,\"no\":0,\"no2\":1.07,\"o3\":70.81,\"so2\":0.14,\"pm2_5\":2.44,\"pm10\":4.27,\"nh3\":2.6},\"dt\":1679979600},{\"main\":{\"aqi\":2},\"components\":{\"co\":183.58,\"no\":0,\"no2\":1.95,\"o3\":64.37,\"so2\":0.12,\"pm2_5\":2.47,\"pm10\":4.32,\"nh3\":2.22},\"dt\":1679983200},{\"main\":{\"aqi\":1},\"components\":{\"co\":185.25,\"no\":0.01,\"no2\":3.77,\"o3\":59.37,\"so2\":0.11,\"pm2_5\":2.52,\"pm10\":4.35,\"nh3\":1.92},\"dt\":1679986800},{\"main\":{\"aqi\":1},\"components\":{\"co\":186.92,\"no\":0.37,\"no2\":4.67,\"o3\":52.93,\"so2\":0.1,\"pm2_5\":2.56,\"pm10\":4.43,\"nh3\":1.79},\"dt\":1679990400},{\"main\":{\"aqi\":1},\"components\":{\"co\":186.92,\"no\":1.01,\"no2\":3.68,\"o3\":49.35,\"so2\":0.09,\"pm2_5\":2.66,\"pm10\":4.55,\"nh3\":1.61},\"dt\":1679994000},{\"main\":{\"aqi\":2},\"components\":{\"co\":195.26,\"no\":0.22,\"no2\":1.11,\"o3\":91.55,\"so2\":0.12,\"pm2_5\":2.51,\"pm10\":3.72,\"nh3\":2.53},\"dt\":1679997600},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0.14,\"no2\":0.67,\"o3\":97.27,\"so2\":0.11,\"pm2_5\":2.44,\"pm10\":3.49,\"nh3\":3.04},\"dt\":1680001200},{\"main\":{\"aqi\":3},\"components\":{\"co\":191.93,\"no\":0.12,\"no2\":0.57,\"o3\":101.57,\"so2\":0.1,\"pm2_5\":2.51,\"pm10\":3.43,\"nh3\":3.61},\"dt\":1680004800},{\"main\":{\"aqi\":3},\"components\":{\"co\":188.59,\"no\":0.06,\"no2\":0.32,\"o3\":108.72,\"so2\":0.08,\"pm2_5\":1.8,\"pm10\":2.48,\"nh3\":2.88},\"dt\":1680008400},{\"main\":{\"aqi\":3},\"components\":{\"co\":186.92,\"no\":0.05,\"no2\":0.28,\"o3\":108.72,\"so2\":0.07,\"pm2_5\":1.65,\"pm10\":2.28,\"nh3\":2.37},\"dt\":1680012000},{\"main\":{\"aqi\":3},\"components\":{\"co\":185.25,\"no\":0.05,\"no2\":0.28,\"o3\":108.72,\"so2\":0.08,\"pm2_5\":1.66,\"pm10\":2.32,\"nh3\":2.15},\"dt\":1680015600},{\"main\":{\"aqi\":2},\"components\":{\"co\":181.91,\"no\":0.14,\"no2\":0.87,\"o3\":98.71,\"so2\":0.1,\"pm2_5\":1.77,\"pm10\":2.68,\"nh3\":1.9},\"dt\":1680019200},{\"main\":{\"aqi\":2},\"components\":{\"co\":178.58,\"no\":0.26,\"no2\":1.97,\"o3\":85.12,\"so2\":0.12,\"pm2_5\":1.96,\"pm10\":3.35,\"nh3\":1.74},\"dt\":1680022800},{\"main\":{\"aqi\":2},\"components\":{\"co\":176.91,\"no\":0.16,\"no2\":2.83,\"o3\":74.39,\"so2\":0.13,\"pm2_5\":2.11,\"pm10\":3.92,\"nh3\":1.74},\"dt\":1680026400},{\"main\":{\"aqi\":2},\"components\":{\"co\":173.57,\"no\":0.02,\"no2\":3.73,\"o3\":60.08,\"so2\":0.12,\"pm2_5\":2.25,\"pm10\":4.47,\"nh3\":1.76},\"dt\":1680030000},{\"main\":{\"aqi\":1},\"components\":{\"co\":170.23,\"no\":0,\"no2\":4.28,\"o3\":45.06,\"so2\":0.11,\"pm2_5\":2.43,\"pm10\":5.1,\"nh3\":1.79},\"dt\":1680033600},{\"main\":{\"aqi\":1},\"components\":{\"co\":166.89,\"no\":0,\"no2\":4.5,\"o3\":36.48,\"so2\":0.11,\"pm2_5\":2.57,\"pm10\":5.63,\"nh3\":1.9},\"dt\":1680037200},{\"main\":{\"aqi\":1},\"components\":{\"co\":166.89,\"no\":0,\"no2\":4.37,\"o3\":34.69,\"so2\":0.11,\"pm2_5\":2.62,\"pm10\":5.74,\"nh3\":2.06},\"dt\":1680040800},{\"main\":{\"aqi\":1},\"components\":{\"co\":165.22,\"no\":0,\"no2\":3.9,\"o3\":35.41,\"so2\":0.09,\"pm2_5\":2.56,\"pm10\":5.4,\"nh3\":1.93},\"dt\":1680044400},{\"main\":{\"aqi\":1},\"components\":{\"co\":165.22,\"no\":0,\"no2\":3.17,\"o3\":36.48,\"so2\":0.08,\"pm2_5\":2.45,\"pm10\":4.97,\"nh3\":1.74},\"dt\":1680048000},{\"main\":{\"aqi\":1},\"components\":{\"co\":163.56,\"no\":0,\"no2\":2.42,\"o3\":37.19,\"so2\":0.07,\"pm2_5\":2.41,\"pm10\":4.82,\"nh3\":1.66},\"dt\":1680051600},{\"main\":{\"aqi\":1},\"components\":{\"co\":165.22,\"no\":0,\"no2\":1.91,\"o3\":37.91,\"so2\":0.07,\"pm2_5\":2.41,\"pm10\":4.84,\"nh3\":1.77},\"dt\":1680055200},{\"main\":{\"aqi\":1},\"components\":{\"co\":165.22,\"no\":0,\"no2\":1.61,\"o3\":37.19,\"so2\":0.07,\"pm2_5\":2.46,\"pm10\":4.86,\"nh3\":2.01},\"dt\":1680058800},{\"main\":{\"aqi\":1},\"components\":{\"co\":166.89,\"no\":0,\"no2\":1.54,\"o3\":36.48,\"so2\":0.06,\"pm2_5\":2.51,\"pm10\":4.79,\"nh3\":2.22},\"dt\":1680062400},{\"main\":{\"aqi\":1},\"components\":{\"co\":166.89,\"no\":0,\"no2\":1.71,\"o3\":37.19,\"so2\":0.06,\"pm2_5\":2.53,\"pm10\":4.59,\"nh3\":2.31},\"dt\":1680066000},{\"main\":{\"aqi\":1},\"components\":{\"co\":171.9,\"no\":0,\"no2\":2.59,\"o3\":39.7,\"so2\":0.06,\"pm2_5\":2.55,\"pm10\":4.4,\"nh3\":2.47},\"dt\":1680069600},{\"main\":{\"aqi\":1},\"components\":{\"co\":176.91,\"no\":0.01,\"no2\":4.33,\"o3\":44.7,\"so2\":0.06,\"pm2_5\":2.55,\"pm10\":4.2,\"nh3\":2.66},\"dt\":1680073200},{\"main\":{\"aqi\":1},\"components\":{\"co\":178.58,\"no\":0.47,\"no2\":5.1,\"o3\":45.78,\"so2\":0.08,\"pm2_5\":2.59,\"pm10\":4.34,\"nh3\":2.69},\"dt\":1680076800},{\"main\":{\"aqi\":1},\"components\":{\"co\":180.24,\"no\":0.91,\"no2\":3.9,\"o3\":54.36,\"so2\":0.17,\"pm2_5\":2.9,\"pm10\":4.81,\"nh3\":3.01},\"dt\":1680080400},{\"main\":{\"aqi\":2},\"components\":{\"co\":188.59,\"no\":0.32,\"no2\":1.93,\"o3\":92.98,\"so2\":0.68,\"pm2_5\":3.81,\"pm10\":5.38,\"nh3\":5},\"dt\":1680084000},{\"main\":{\"aqi\":2},\"components\":{\"co\":186.92,\"no\":0.3,\"no2\":1.71,\"o3\":95.84,\"so2\":0.97,\"pm2_5\":4.15,\"pm10\":5.7,\"nh3\":5.13},\"dt\":1680087600},{\"main\":{\"aqi\":3},\"components\":{\"co\":185.25,\"no\":0.32,\"no2\":1.84,\"o3\":104.43,\"so2\":1.51,\"pm2_5\":4.74,\"pm10\":6.31,\"nh3\":4.24},\"dt\":1680091200},{\"main\":{\"aqi\":3},\"components\":{\"co\":185.25,\"no\":0.21,\"no2\":1.17,\"o3\":118.73,\"so2\":1.94,\"pm2_5\":5.61,\"pm10\":7.22,\"nh3\":2.85},\"dt\":1680094800},{\"main\":{\"aqi\":3},\"components\":{\"co\":186.92,\"no\":0.11,\"no2\":0.65,\"o3\":121.59,\"so2\":1.94,\"pm2_5\":7,\"pm10\":8.81,\"nh3\":2.75},\"dt\":1680098400},{\"main\":{\"aqi\":3},\"components\":{\"co\":186.92,\"no\":0.07,\"no2\":0.48,\"o3\":121.59,\"so2\":1.73,\"pm2_5\":7.61,\"pm10\":10,\"nh3\":2.82},\"dt\":1680102000},{\"main\":{\"aqi\":3},\"components\":{\"co\":186.92,\"no\":0.08,\"no2\":0.65,\"o3\":125.89,\"so2\":1.91,\"pm2_5\":8.48,\"pm10\":11.84,\"nh3\":3.51},\"dt\":1680105600},{\"main\":{\"aqi\":3},\"components\":{\"co\":196.93,\"no\":0.11,\"no2\":1.17,\"o3\":134.47,\"so2\":2.32,\"pm2_5\":11.88,\"pm10\":15.64,\"nh3\":5},\"dt\":1680109200},{\"main\":{\"aqi\":3},\"components\":{\"co\":203.61,\"no\":0.08,\"no2\":1.71,\"o3\":128.75,\"so2\":1.86,\"pm2_5\":11.54,\"pm10\":15.85,\"nh3\":4.81},\"dt\":1680112800},{\"main\":{\"aqi\":3},\"components\":{\"co\":196.93,\"no\":0.02,\"no2\":2.33,\"o3\":108.72,\"so2\":1.16,\"pm2_5\":8.27,\"pm10\":13.26,\"nh3\":3.51},\"dt\":1680116400},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0,\"no2\":2.59,\"o3\":92.98,\"so2\":0.77,\"pm2_5\":6.7,\"pm10\":12.87,\"nh3\":2.47},\"dt\":1680120000},{\"main\":{\"aqi\":2},\"components\":{\"co\":191.93,\"no\":0,\"no2\":2.48,\"o3\":87.26,\"so2\":0.6,\"pm2_5\":6.18,\"pm10\":14.16,\"nh3\":1.57},\"dt\":1680123600},{\"main\":{\"aqi\":2},\"components\":{\"co\":191.93,\"no\":0,\"no2\":2.36,\"o3\":83.68,\"so2\":0.5,\"pm2_5\":6.29,\"pm10\":17.48,\"nh3\":1.11},\"dt\":1680127200},{\"main\":{\"aqi\":2},\"components\":{\"co\":190.26,\"no\":0,\"no2\":2.03,\"o3\":80.11,\"so2\":0.44,\"pm2_5\":6.71,\"pm10\":22.26,\"nh3\":0.89},\"dt\":1680130800},{\"main\":{\"aqi\":2},\"components\":{\"co\":190.26,\"no\":0,\"no2\":1.59,\"o3\":76.53,\"so2\":0.39,\"pm2_5\":7.14,\"pm10\":26.39,\"nh3\":0.74},\"dt\":1680134400},{\"main\":{\"aqi\":2},\"components\":{\"co\":188.59,\"no\":0,\"no2\":1.26,\"o3\":71.53,\"so2\":0.35,\"pm2_5\":7.24,\"pm10\":28.91,\"nh3\":0.62},\"dt\":1680138000},{\"main\":{\"aqi\":2},\"components\":{\"co\":186.92,\"no\":0,\"no2\":1.16,\"o3\":66.52,\"so2\":0.31,\"pm2_5\":6.7,\"pm10\":24.51,\"nh3\":0.5},\"dt\":1680141600},{\"main\":{\"aqi\":2},\"components\":{\"co\":186.92,\"no\":0,\"no2\":1.14,\"o3\":66.52,\"so2\":0.3,\"pm2_5\":5.46,\"pm10\":16.78,\"nh3\":0.46},\"dt\":1680145200},{\"main\":{\"aqi\":2},\"components\":{\"co\":188.59,\"no\":0,\"no2\":0.85,\"o3\":72.24,\"so2\":0.28,\"pm2_5\":3.36,\"pm10\":9.01,\"nh3\":0.43},\"dt\":1680148800},{\"main\":{\"aqi\":2},\"components\":{\"co\":186.92,\"no\":0,\"no2\":0.68,\"o3\":68.66,\"so2\":0.2,\"pm2_5\":2.61,\"pm10\":6.51,\"nh3\":0.38},\"dt\":1680152400},{\"main\":{\"aqi\":2},\"components\":{\"co\":186.92,\"no\":0,\"no2\":0.74,\"o3\":65.8,\"so2\":0.19,\"pm2_5\":2.26,\"pm10\":5.28,\"nh3\":0.39},\"dt\":1680156000},{\"main\":{\"aqi\":2},\"components\":{\"co\":185.25,\"no\":0,\"no2\":1,\"o3\":63.66,\"so2\":0.22,\"pm2_5\":2.05,\"pm10\":4.7,\"nh3\":0.46},\"dt\":1680159600},{\"main\":{\"aqi\":2},\"components\":{\"co\":185.25,\"no\":0.04,\"no2\":1.17,\"o3\":61.51,\"so2\":0.29,\"pm2_5\":2.03,\"pm10\":4.79,\"nh3\":0.63},\"dt\":1680163200},{\"main\":{\"aqi\":2},\"components\":{\"co\":185.25,\"no\":0.14,\"no2\":1.15,\"o3\":60.8,\"so2\":0.35,\"pm2_5\":2.06,\"pm10\":4.95,\"nh3\":0.85},\"dt\":1680166800},{\"main\":{\"aqi\":2},\"components\":{\"co\":186.92,\"no\":0.18,\"no2\":0.97,\"o3\":69.38,\"so2\":0.33,\"pm2_5\":1.59,\"pm10\":3.81,\"nh3\":0.97},\"dt\":1680170400},{\"main\":{\"aqi\":2},\"components\":{\"co\":188.59,\"no\":0.15,\"no2\":0.85,\"o3\":76.53,\"so2\":0.29,\"pm2_5\":1.28,\"pm10\":2.93,\"nh3\":1.28},\"dt\":1680174000},{\"main\":{\"aqi\":2},\"components\":{\"co\":188.59,\"no\":0.13,\"no2\":0.78,\"o3\":80.11,\"so2\":0.3,\"pm2_5\":1.33,\"pm10\":2.87,\"nh3\":1.85},\"dt\":1680177600},{\"main\":{\"aqi\":2},\"components\":{\"co\":188.59,\"no\":0.11,\"no2\":0.57,\"o3\":85.12,\"so2\":0.29,\"pm2_5\":1.46,\"pm10\":2.97,\"nh3\":2.06},\"dt\":1680181200},{\"main\":{\"aqi\":2},\"components\":{\"co\":188.59,\"no\":0.08,\"no2\":0.44,\"o3\":90.84,\"so2\":0.28,\"pm2_5\":1.79,\"pm10\":3.55,\"nh3\":2.15},\"dt\":1680184800},{\"main\":{\"aqi\":2},\"components\":{\"co\":188.59,\"no\":0.06,\"no2\":0.4,\"o3\":95.84,\"so2\":0.28,\"pm2_5\":1.88,\"pm10\":3.63,\"nh3\":1.99},\"dt\":1680188400},{\"main\":{\"aqi\":2},\"components\":{\"co\":190.26,\"no\":0.07,\"no2\":0.43,\"o3\":97.27,\"so2\":0.27,\"pm2_5\":1.82,\"pm10\":3.21,\"nh3\":1.52},\"dt\":1680192000},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0.06,\"no2\":0.65,\"o3\":95.84,\"so2\":0.28,\"pm2_5\":2.44,\"pm10\":4.12,\"nh3\":1.41},\"dt\":1680195600},{\"main\":{\"aqi\":2},\"components\":{\"co\":195.26,\"no\":0.03,\"no2\":0.91,\"o3\":94.41,\"so2\":0.28,\"pm2_5\":3.09,\"pm10\":5.49,\"nh3\":1.38},\"dt\":1680199200},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0,\"no2\":1.19,\"o3\":92.98,\"so2\":0.27,\"pm2_5\":3.19,\"pm10\":6.21,\"nh3\":1.36},\"dt\":1680202800},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.35,\"o3\":88.69,\"so2\":0.29,\"pm2_5\":3.6,\"pm10\":7.64,\"nh3\":1.23},\"dt\":1680206400},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.37,\"o3\":84.4,\"so2\":0.33,\"pm2_5\":4.57,\"pm10\":10.3,\"nh3\":1.03},\"dt\":1680210000},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.31,\"o3\":81.54,\"so2\":0.36,\"pm2_5\":4.99,\"pm10\":11.69,\"nh3\":0.88},\"dt\":1680213600},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.23,\"o3\":78.68,\"so2\":0.37,\"pm2_5\":5.16,\"pm10\":12.36,\"nh3\":0.75},\"dt\":1680217200},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0,\"no2\":1.16,\"o3\":75.82,\"so2\":0.38,\"pm2_5\":5.67,\"pm10\":13.85,\"nh3\":0.71},\"dt\":1680220800},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0,\"no2\":1.06,\"o3\":72.96,\"so2\":0.4,\"pm2_5\":5.64,\"pm10\":13.37,\"nh3\":0.66},\"dt\":1680224400},{\"main\":{\"aqi\":2},\"components\":{\"co\":191.93,\"no\":0,\"no2\":0.93,\"o3\":70.1,\"so2\":0.39,\"pm2_5\":5.26,\"pm10\":12.15,\"nh3\":0.62},\"dt\":1680228000},{\"main\":{\"aqi\":2},\"components\":{\"co\":190.26,\"no\":0,\"no2\":0.81,\"o3\":67.95,\"so2\":0.36,\"pm2_5\":5.24,\"pm10\":11.83,\"nh3\":0.61},\"dt\":1680231600},{\"main\":{\"aqi\":2},\"components\":{\"co\":188.59,\"no\":0,\"no2\":0.75,\"o3\":65.8,\"so2\":0.33,\"pm2_5\":5.26,\"pm10\":10.98,\"nh3\":0.6},\"dt\":1680235200},{\"main\":{\"aqi\":2},\"components\":{\"co\":188.59,\"no\":0,\"no2\":0.8,\"o3\":65.09,\"so2\":0.31,\"pm2_5\":4.94,\"pm10\":8.87,\"nh3\":0.52},\"dt\":1680238800},{\"main\":{\"aqi\":2},\"components\":{\"co\":190.26,\"no\":0,\"no2\":1.1,\"o3\":64.37,\"so2\":0.32,\"pm2_5\":4.34,\"pm10\":6.92,\"nh3\":0.41},\"dt\":1680242400},{\"main\":{\"aqi\":2},\"components\":{\"co\":191.93,\"no\":0,\"no2\":1.59,\"o3\":62.94,\"so2\":0.42,\"pm2_5\":3.42,\"pm10\":5.51,\"nh3\":0.33},\"dt\":1680246000},{\"main\":{\"aqi\":2},\"components\":{\"co\":191.93,\"no\":0.01,\"no2\":2.08,\"o3\":60.8,\"so2\":0.58,\"pm2_5\":3.11,\"pm10\":5.39,\"nh3\":0.28},\"dt\":1680249600},{\"main\":{\"aqi\":1},\"components\":{\"co\":193.6,\"no\":0.07,\"no2\":2.44,\"o3\":59.37,\"so2\":0.84,\"pm2_5\":3.3,\"pm10\":5.87,\"nh3\":0.27},\"dt\":1680253200},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0.2,\"no2\":1.97,\"o3\":63.66,\"so2\":0.86,\"pm2_5\":3.22,\"pm10\":5.84,\"nh3\":0.26},\"dt\":1680256800},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0.19,\"no2\":1.54,\"o3\":71.53,\"so2\":0.79,\"pm2_5\":3.2,\"pm10\":5.67,\"nh3\":0.35},\"dt\":1680260400},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0.16,\"no2\":1.22,\"o3\":85.83,\"so2\":0.76,\"pm2_5\":2.75,\"pm10\":4.91,\"nh3\":0.46},\"dt\":1680264000},{\"main\":{\"aqi\":3},\"components\":{\"co\":193.6,\"no\":0.13,\"no2\":0.83,\"o3\":105.86,\"so2\":0.7,\"pm2_5\":2.54,\"pm10\":4.96,\"nh3\":0.5},\"dt\":1680267600},{\"main\":{\"aqi\":3},\"components\":{\"co\":193.6,\"no\":0.08,\"no2\":0.66,\"o3\":115.87,\"so2\":0.66,\"pm2_5\":2.63,\"pm10\":5.75,\"nh3\":0.49},\"dt\":1680271200},{\"main\":{\"aqi\":3},\"components\":{\"co\":193.6,\"no\":0.07,\"no2\":0.66,\"o3\":118.73,\"so2\":0.66,\"pm2_5\":2.6,\"pm10\":6.09,\"nh3\":0.46},\"dt\":1680274800},{\"main\":{\"aqi\":3},\"components\":{\"co\":193.6,\"no\":0.08,\"no2\":0.85,\"o3\":115.87,\"so2\":0.68,\"pm2_5\":2.67,\"pm10\":6.47,\"nh3\":0.5},\"dt\":1680278400},{\"main\":{\"aqi\":3},\"components\":{\"co\":193.6,\"no\":0.07,\"no2\":1.27,\"o3\":111.58,\"so2\":0.71,\"pm2_5\":3.03,\"pm10\":7.28,\"nh3\":0.59},\"dt\":1680282000},{\"main\":{\"aqi\":3},\"components\":{\"co\":195.27,\"no\":0.03,\"no2\":1.76,\"o3\":108.72,\"so2\":0.72,\"pm2_5\":3.31,\"pm10\":7.62,\"nh3\":0.65},\"dt\":1680285600},{\"main\":{\"aqi\":3},\"components\":{\"co\":196.93,\"no\":0.01,\"no2\":1.99,\"o3\":103,\"so2\":0.71,\"pm2_5\":3.64,\"pm10\":7.76,\"nh3\":0.64},\"dt\":1680289200},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.93,\"o3\":98.71,\"so2\":0.72,\"pm2_5\":4.08,\"pm10\":8.04,\"nh3\":0.6},\"dt\":1680292800},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.84,\"o3\":91.55,\"so2\":0.75,\"pm2_5\":4.84,\"pm10\":8.9,\"nh3\":0.55},\"dt\":1680296400},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.82,\"o3\":85.12,\"so2\":0.74,\"pm2_5\":5.58,\"pm10\":9.94,\"nh3\":0.45},\"dt\":1680300000},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.78,\"o3\":78.68,\"so2\":0.67,\"pm2_5\":6.05,\"pm10\":10.81,\"nh3\":0.38},\"dt\":1680303600},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.54,\"o3\":74.39,\"so2\":0.6,\"pm2_5\":6.2,\"pm10\":11.2,\"nh3\":0.32},\"dt\":1680307200},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.32,\"o3\":72.96,\"so2\":0.58,\"pm2_5\":6.1,\"pm10\":11.16,\"nh3\":0.24},\"dt\":1680310800},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.09,\"o3\":73.67,\"so2\":0.57,\"pm2_5\":5.7,\"pm10\":10.57,\"nh3\":0.17},\"dt\":1680314400},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":0.9,\"o3\":77.25,\"so2\":0.54,\"pm2_5\":4.94,\"pm10\":9.34,\"nh3\":0.11},\"dt\":1680318000},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":0.85,\"o3\":80.11,\"so2\":0.57,\"pm2_5\":4.14,\"pm10\":7.87,\"nh3\":0.09},\"dt\":1680321600},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.06,\"o3\":77.96,\"so2\":0.6,\"pm2_5\":3.88,\"pm10\":7.58,\"nh3\":0.1},\"dt\":1680325200},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.5,\"o3\":76.53,\"so2\":0.69,\"pm2_5\":3.79,\"pm10\":7.78,\"nh3\":0.11},\"dt\":1680328800},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0,\"no2\":2.12,\"o3\":75.1,\"so2\":0.78,\"pm2_5\":3.75,\"pm10\":8.06,\"nh3\":0.13},\"dt\":1680332400},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0.03,\"no2\":2.61,\"o3\":75.82,\"so2\":0.89,\"pm2_5\":3.76,\"pm10\":8.17,\"nh3\":0.13},\"dt\":1680336000},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0.1,\"no2\":2.72,\"o3\":78.68,\"so2\":1.03,\"pm2_5\":3.72,\"pm10\":7.9,\"nh3\":0.13},\"dt\":1680339600},{\"main\":{\"aqi\":2},\"components\":{\"co\":198.6,\"no\":0.09,\"no2\":1.99,\"o3\":89.41,\"so2\":0.87,\"pm2_5\":3,\"pm10\":5.75,\"nh3\":0.08},\"dt\":1680343200},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0.1,\"no2\":1.67,\"o3\":91.55,\"so2\":0.79,\"pm2_5\":2.7,\"pm10\":4.68,\"nh3\":0.11},\"dt\":1680346800},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0.1,\"no2\":1.65,\"o3\":91.55,\"so2\":0.81,\"pm2_5\":2.84,\"pm10\":4.6,\"nh3\":0.19},\"dt\":1680350400},{\"main\":{\"aqi\":2},\"components\":{\"co\":195.27,\"no\":0.1,\"no2\":1.56,\"o3\":90.84,\"so2\":0.86,\"pm2_5\":3.06,\"pm10\":4.78,\"nh3\":0.35},\"dt\":1680354000},{\"main\":{\"aqi\":2},\"components\":{\"co\":191.93,\"no\":0.1,\"no2\":1.52,\"o3\":88.69,\"so2\":0.97,\"pm2_5\":3.55,\"pm10\":5.36,\"nh3\":0.41},\"dt\":1680357600},{\"main\":{\"aqi\":2},\"components\":{\"co\":190.26,\"no\":0.11,\"no2\":1.71,\"o3\":82.25,\"so2\":1.18,\"pm2_5\":4.26,\"pm10\":5.79,\"nh3\":0.31},\"dt\":1680361200},{\"main\":{\"aqi\":2},\"components\":{\"co\":188.59,\"no\":0.1,\"no2\":2.12,\"o3\":70.1,\"so2\":1.28,\"pm2_5\":3.95,\"pm10\":4.87,\"nh3\":0.25},\"dt\":1680364800},{\"main\":{\"aqi\":1},\"components\":{\"co\":185.25,\"no\":0.08,\"no2\":2.44,\"o3\":58.65,\"so2\":1.06,\"pm2_5\":1.95,\"pm10\":2.49,\"nh3\":0.21},\"dt\":1680368400},{\"main\":{\"aqi\":1},\"components\":{\"co\":185.25,\"no\":0.03,\"no2\":2.74,\"o3\":56.51,\"so2\":0.85,\"pm2_5\":1.01,\"pm10\":1.47,\"nh3\":0.21},\"dt\":1680372000},{\"main\":{\"aqi\":1},\"components\":{\"co\":185.25,\"no\":0,\"no2\":2.79,\"o3\":55.08,\"so2\":0.75,\"pm2_5\":0.94,\"pm10\":1.39,\"nh3\":0.19},\"dt\":1680375600},{\"main\":{\"aqi\":1},\"components\":{\"co\":185.25,\"no\":0,\"no2\":2.59,\"o3\":52.21,\"so2\":0.73,\"pm2_5\":1.13,\"pm10\":1.59,\"nh3\":0.17},\"dt\":1680379200},{\"main\":{\"aqi\":1},\"components\":{\"co\":186.92,\"no\":0,\"no2\":2.34,\"o3\":50.07,\"so2\":0.71,\"pm2_5\":1.36,\"pm10\":1.84,\"nh3\":0.16},\"dt\":1680382800},{\"main\":{\"aqi\":1},\"components\":{\"co\":186.92,\"no\":0,\"no2\":2.06,\"o3\":49.35,\"so2\":0.66,\"pm2_5\":1.62,\"pm10\":2.17,\"nh3\":0.15},\"dt\":1680386400},{\"main\":{\"aqi\":1},\"components\":{\"co\":188.59,\"no\":0,\"no2\":1.69,\"o3\":53.64,\"so2\":0.56,\"pm2_5\":2.06,\"pm10\":2.71,\"nh3\":0.16},\"dt\":1680390000},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0,\"no2\":1.52,\"o3\":60.8,\"so2\":0.51,\"pm2_5\":2.46,\"pm10\":3.34,\"nh3\":0.19},\"dt\":1680393600},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0,\"no2\":1.74,\"o3\":62.94,\"so2\":0.6,\"pm2_5\":2.87,\"pm10\":4.26,\"nh3\":0.28},\"dt\":1680397200},{\"main\":{\"aqi\":1},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.95,\"o3\":59.37,\"so2\":0.65,\"pm2_5\":3.65,\"pm10\":5.48,\"nh3\":0.33},\"dt\":1680400800},{\"main\":{\"aqi\":1},\"components\":{\"co\":198.6,\"no\":0,\"no2\":1.76,\"o3\":56.51,\"so2\":0.51,\"pm2_5\":3.72,\"pm10\":5.38,\"nh3\":0.39},\"dt\":1680404400},{\"main\":{\"aqi\":1},\"components\":{\"co\":190.26,\"no\":0,\"no2\":1.52,\"o3\":40.05,\"so2\":0.18,\"pm2_5\":3,\"pm10\":4.49,\"nh3\":0.31},\"dt\":1680408000},{\"main\":{\"aqi\":1},\"components\":{\"co\":180.24,\"no\":0,\"no2\":1.56,\"o3\":26.82,\"so2\":0.07,\"pm2_5\":2.79,\"pm10\":4.45,\"nh3\":0.27},\"dt\":1680411600},{\"main\":{\"aqi\":1},\"components\":{\"co\":176.91,\"no\":0.01,\"no2\":2.19,\"o3\":22.35,\"so2\":0.05,\"pm2_5\":2.72,\"pm10\":4.68,\"nh3\":0.38},\"dt\":1680415200},{\"main\":{\"aqi\":1},\"components\":{\"co\":175.24,\"no\":0.13,\"no2\":3.64,\"o3\":18.6,\"so2\":0.05,\"pm2_5\":2.63,\"pm10\":4.66,\"nh3\":0.52},\"dt\":1680418800},{\"main\":{\"aqi\":1},\"components\":{\"co\":173.57,\"no\":1.29,\"no2\":3.21,\"o3\":16.63,\"so2\":0.04,\"pm2_5\":2.53,\"pm10\":4.51,\"nh3\":0.38},\"dt\":1680422400},{\"main\":{\"aqi\":1},\"components\":{\"co\":173.57,\"no\":1.65,\"no2\":2.42,\"o3\":23.25,\"so2\":0.05,\"pm2_5\":2.5,\"pm10\":4.32,\"nh3\":0.54},\"dt\":1680426000},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0.17,\"no2\":0.72,\"o3\":77.25,\"so2\":0.37,\"pm2_5\":1.23,\"pm10\":1.87,\"nh3\":0.97},\"dt\":1680429600},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0.1,\"no2\":0.45,\"o3\":86.55,\"so2\":0.38,\"pm2_5\":0.94,\"pm10\":1.39,\"nh3\":0.97},\"dt\":1680433200},{\"main\":{\"aqi\":2},\"components\":{\"co\":195.27,\"no\":0.07,\"no2\":0.33,\"o3\":91.55,\"so2\":0.31,\"pm2_5\":0.93,\"pm10\":1.35,\"nh3\":1},\"dt\":1680436800},{\"main\":{\"aqi\":2},\"components\":{\"co\":196.93,\"no\":0.05,\"no2\":0.23,\"o3\":98.71,\"so2\":0.28,\"pm2_5\":0.88,\"pm10\":1.25,\"nh3\":0.85},\"dt\":1680440400},{\"main\":{\"aqi\":3},\"components\":{\"co\":198.6,\"no\":0.04,\"no2\":0.19,\"o3\":103,\"so2\":0.26,\"pm2_5\":0.91,\"pm10\":1.26,\"nh3\":0.75},\"dt\":1680444000},{\"main\":{\"aqi\":3},\"components\":{\"co\":200.27,\"no\":0.03,\"no2\":0.19,\"o3\":104.43,\"so2\":0.25,\"pm2_5\":0.93,\"pm10\":1.27,\"nh3\":0.72},\"dt\":1680447600},{\"main\":{\"aqi\":3},\"components\":{\"co\":198.6,\"no\":0.04,\"no2\":0.28,\"o3\":104.43,\"so2\":0.21,\"pm2_5\":0.94,\"pm10\":1.31,\"nh3\":0.78},\"dt\":1680451200},{\"main\":{\"aqi\":3},\"components\":{\"co\":198.6,\"no\":0.05,\"no2\":0.43,\"o3\":104.43,\"so2\":0.16,\"pm2_5\":0.88,\"pm10\":1.3,\"nh3\":0.9},\"dt\":1680454800},{\"main\":{\"aqi\":3},\"components\":{\"co\":196.93,\"no\":0.03,\"no2\":0.57,\"o3\":104.43,\"so2\":0.13,\"pm2_5\":0.79,\"pm10\":1.24,\"nh3\":1.06},\"dt\":1680458400},{\"main\":{\"aqi\":2},\"components\":{\"co\":195.27,\"no\":0.01,\"no2\":1.04,\"o3\":90.84,\"so2\":0.1,\"pm2_5\":0.81,\"pm10\":1.48,\"nh3\":1.19},\"dt\":1680462000},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0,\"no2\":1.41,\"o3\":74.39,\"so2\":0.08,\"pm2_5\":0.91,\"pm10\":1.91,\"nh3\":1.25},\"dt\":1680465600},{\"main\":{\"aqi\":2},\"components\":{\"co\":193.6,\"no\":0,\"no2\":1.48,\"o3\":66.52,\"so2\":0.06,\"pm2_5\":0.99,\"pm10\":2.31,\"nh3\":1.35},\"dt\":1680469200},{\"main\":{\"aqi\":1},\"components\":{\"co\":191.93,\"no\":0,\"no2\":1.67,\"o3\":58.65,\"so2\":0.05,\"pm2_5\":1.13,\"pm10\":2.72,\"nh3\":1.35},\"dt\":1680472800}]}";
    
    private String badResponse = "{\"cod\":\"400\",\"message\":\"wrong latitude\"}";

    @BeforeEach
    public void setup() {
    }

    @AfterEach
    public void teardown() {
    }

    @Test
    void forecast() throws Exception {
        Mockito.when(httpClient.doGet(anyString(), any())).thenReturn(weekResponse);
        List<AirStats> statslst = adapter.forecast(40.0, -8);

        assertThat(statslst).hasSize(4);
    }

    @Test
    void weekBadRequest() throws Exception {
        Mockito.when(httpClient.doGet(anyString(), any())).thenReturn(badResponse);
        List<AirStats> statslst = adapter.forecast(140.0, -8);

        assertThat(statslst).isEmpty();
    }

    @Test
    void history() throws Exception {
        Mockito.when(httpClient.doGet(anyString(), any())).thenReturn(historyResponse);
        List<AirStats> statslst = adapter.history(40.0, -8);

        assertThat(statslst).hasSize(6);
    }

    @Test
    void historyBadRequest() throws Exception {
        Mockito.when(httpClient.doGet(anyString(), any())).thenReturn(badResponse);
        List<AirStats> statslst = adapter.history(140.0, -8);

        assertThat(statslst).isEmpty();
    }
}
